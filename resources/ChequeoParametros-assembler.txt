.586 
option casemap :none 
include \masm32\include\masm32rt.inc 
includelib \masm32\lib\kernel32.lib 
includelib \masm32\lib\user32.lib 
includelib \masm32\lib\masm32.lib 

dll_dllcrt0 PROTO C
printf PROTO C : VARARG 

.data 
Error_DivisionCero DB "Error: Division por cero", 10, 0 
Error_Overflow DB "Error: Overflow en producto entre Enteros", 10, 0 
Error_Subtipo_inferior DB "Error: Valor menor al rango inferior del subtipo ", 10, 0 
Error_Subtipo_superior DB "Error: Valor mayor al limite superior del subtipo ", 10, 0 
$_FIN_DE_PROGRAMA_$ DB "FIN DE LA EJECUCION DEL PROGRAMA ", 10, 0 
$_$mensajeEntero$_$ DB "%d, %d, %d", 10, 0 
$_$mensajeFloat$_$ DB "%f, %f, %f", 10, 0 
@ParametroRealInt DW ?
@RET$MAIN$juancito$juancito2$juancito3 DW ?
a$MAIN$juancito$juancito2 DW ?
a$MAIN$juancito DW ?
juancito3$MAIN$juancito$juancito2 DW ?
juancito2$MAIN$juancito DW ?
@ParametroRealFloat DQ ?
juancito$MAIN DW ?
@RET$MAIN$juancito DW ?
c$MAIN DQ ?
d$MAIN DW ?
a$MAIN$juancito$juancito2$juancito3 DW ?
@RET$MAIN$juancito$juancito2 DW ?

.code 
 
$MAIN$juancito: 
PUSH EBP 
MOV EBP, ESP 
SUB ESP, 4 
PUSH EDI 
PUSH ESI 
MOV AX, @ParametroRealInt 
MOV a$MAIN$juancito, AX 
 
JMP LABELadan$MAIN
 
MOV AX, d$MAIN$juancito
MOV @ParametroRealInt, AX 
CALL $MAIN$juancito
MOV AX, @RET$MAIN$juancito
MOV d$MAIN, AX

 
MOV AX, a$MAIN$juancito
MOV @RET$MAIN$juancito, AX
POP ESI 
POP EDI 
MOV ESP, EBP 
POP EBP 
RET
 

$MAIN$juancito$juancito2: 
PUSH EBP 
MOV EBP, ESP 
SUB ESP, 4 
PUSH EDI 
PUSH ESI 
MOV AX, @ParametroRealInt 
MOV a$MAIN$juancito$juancito2, AX 
 
JMP LABELadan$MAIN
 
MOV AX, a$MAIN$juancito$juancito2
MOV @RET$MAIN$juancito$juancito2, AX
POP ESI 
POP EDI 
MOV ESP, EBP 
POP EBP 
RET
 

$MAIN$juancito$juancito2$juancito3: 
PUSH EBP 
MOV EBP, ESP 
SUB ESP, 4 
PUSH EDI 
PUSH ESI 
MOV AX, @ParametroRealInt 
MOV a$MAIN$juancito$juancito2$juancito3, AX 
 
JMP LABELadan$MAIN
 
MOV AX, a$MAIN$juancito$juancito2$juancito3
MOV @RET$MAIN$juancito$juancito2$juancito3, AX
POP ESI 
POP EDI 
MOV ESP, EBP 
POP EBP 
RET
 

start: 
LABELadan$MAIN: 
JMP LABELadan$MAIN
 
JMP fin 
 
Divison_Por_Cero:
invoke printf, addr Error_DivisionCero 
JMP fin

Overflow:
invoke printf, addr Error_Overflow 
JMP fin

Subtipo_inferior:
invoke printf, addr Error_Subtipo_inferior 
JMP fin

Subtipo_superior:
invoke printf, addr Error_Subtipo_superior 
JMP fin

fin: 
invoke printf, addr $_FIN_DE_PROGRAMA_$ 
invoke crt_getchar 
invoke ExitProcess, 0 
end start